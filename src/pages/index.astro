---
import { AstroError } from "astro/errors";
import LookupForm from "../components/LookupForm.astro";
import { MarkdownEditor } from "../components/mke.react";
import "../components/mke.react.css";
import Layout from "../layouts/default.astro";

export const prerender = false;

const userId = Astro.locals.auth().userId;

if (!userId) {
  throw new Error("Invalid user.");
}

let noteData: NoteData = {
  userId: userId,
  url: "",
  name: "",
  notes: "",
};
---

<Layout>
  <h1>Add Notes</h1>
  <LookupForm />
  <MarkdownEditor client:only="react" noteData={noteData}>
    <div slot="fallback">Loading...</div>
  </MarkdownEditor>
</Layout>
